from services.library_service import borrow_book_by_patron, get_patron_borrowed_books

def test_borrow_existing_book():
    # 使用 catalog 里已有合法书 ID
    book_id = 'b1'  # 替换为你之前查到的合法书 ID
    patron_id = 'patron_safe'
    borrow_book_by_patron(book_id, patron_id)
    borrowed = get_patron_borrowed_books(patron_id)
    assert any(b['id'] == book_id for b in borrowed)
